#!/usr/bin/env ruby

# Name::          Bibkeys
# Author::        Lincoln Mullen | lincoln@lincolnmullen.com
# Copyright::     Copyright (c) 2012 Lincoln Mullen 
# License::       MIT License | http://lmullen.mit-license.org/


# for use/testing when no gem is installed
$:.unshift File.join(File.dirname(__FILE__), *%w[.. lib]) 

require 'optparse'
require 'bibkeys'

# set default options
options = {}
options[:sort] = false

opts = OptionParser.new do|opts|

  # help options
  opts.banner = "Usage: bibkeys [-s] bibliography.bib"
  opts.on( '-h', '--help', 'Display help screen' ) do
    puts opts
    exit
  end

  # should we sort?
  opts.on('-s', '--sort', 'Sort the list of keys' ) do
    options[:sort] = true
  end

end
opts.parse!       # strips all non-filename arguments from ARGV

# If there is a filename in ARGV, list its keys
if ARGV.any?
  Bibkeys.new( ARGV[0], options[:sort] ).list 
else
  puts "Please specify which BibTeX file to use."
end
